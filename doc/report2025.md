Программное обеспечение для расчета геотермы

Для реконструкции термального состояния литосферной мантии и подготовки данных для принятия решений о наличие конкретных процессов необходимо использовать информацию о геологических процессах на исследуемом объекте, близкую к актуальной.  Решения принимаются на основе анализа выявленных свойств математических моделей процессов, имеющих место в конкретном объекте, задаваемых начальными данными.  Математическое моделирование состоит из пяти основных этапов -- построение общей модели; ее идентификации на измеренные или оцененные значения параметров конкретного объекта; задание начальных условий согласно некоторому сценарию исследования; построение прогнозного расчета или анализ свойств модели. Заключение о наличии или отсутствии свойств/процессов производится на основе их общей экспертной оценки сценариев специалистом-предметником (геологом, геофизиком).

В качестве модели геотермы использована работа \[Костерок ;-)\], которая признана мировым сообществом исследователей как достаточно достоверная.  Модель Хостерка оценивает температуру литосферных слоев, исходя из начальных условий -- толщин составляющих материк литосферных слоев, данных теплового потока в слоях. В этом исследовании общая модель идентифицирована данными из работы \[Костерок\], диапазон изменения начальных условий также принят согласно рекомендациям этой работы.

Задача оценки теплового потока представлена как проблема оптимизации отклонения измеренных значений температуры слоев на различных глубинах (полученных на этапах проекта ....) от профиля моделируемой геотермы, задаваемого начальным значением теплового потока q_0. В результате для тестового набора данных получена оценка q_0=36.819 mw/m\^2, удовлетворяющая критерию (отклонение 100 градусов) на глубине ... \[Костерок\]. На рисунке ... показан расчет геотермы для оптимального значения q_0.

![](media/image1.png){width="4.419444444444444in"
height="3.1041666666666665in"}

Процедура оптимизации параметра модели q_0 строится на основе расчета оценок отклонений измеренных значений геотермы от оцененных по соответствующей геотерме для нескольких начальных значений теплового потока q_0 = 35, 35.2, 35.4, ..., 39 mw/m\^2, аппроксимацией промежуточных значений отклонений сплайнами третьего порядка, применением метода одномерной оптимизации «Золотое сечение» на полученном сплайне. На рисунке ... показаны расчеты теплового потока (а) для набора начальных значений и вид сплайна (б) оценок отклонений значений температур. Значение q_0 при минимальном отклонении показано красной точкой. Аппроксимация сплайном позволяет не тратить вычислительные ресурсы для проведения процедуры моделирования внутри интервала q_i - q_i+1 в процессе решения оптимизационной задачи, при этом необходима точность (0.1 mw/m\^2) обеспечивается.

![](media/image2.png){width="3.1173611111111112in"
height="2.079861111111111in"}

Программное обеспечение проведения вышеуказанных расчетов представляет собой прикладной пакет - приложение WEB, реализованном при помощи двух языков программирования -- Julia (серверный модуль, модуль расчета модели) и JavaScript, встроенный в WEB-браузер.  WEB-интерфейс пользователя приложения создан при помощи библиотеки Vue.js версии 3-LTS (long time support), модуль расчета портирован из исходного кода модели Matlab, любезно предоставленного автором модели, в программу на языке Julia.  Синтаксис языков Matlab и Julia близки, что дало возможность выполнить преобразование быстро и качественно (с минимальным влиянием человеческого фактора на код программы).  Открытая Julia-версия модели позволяет избегать дальнейшей блокировки поставщиком доступа к программной системе Matlab (vendor-lock), создавать более производительные компилируемые в машинный код приложения с гибкой расширяемой архитектурой.  Модель Хостерка дополнены подсистемами сплайн-аппроксимации и оптимизации при помощи пакетов, разработанных сообществом пользователей Julia.

## Потребительские свойства продукта

Разработанное приложение (методо-ориентированный прикладной пакет) GTherm предназначено для поддержки проведения исследований по оценке ...., включающих этап реконструкции термального состояния литосферной мантии.  Пакет представляет собой многопользовательское WEB-приложение, позволяющее [геологу] формировать задачи по расчету оптимальных характеристик теплового потока на основе имеющихся исходных данных измерений, загружаемых из EXCEL- и CSV-файалов, а также задаваемых в интерфейсе пользователя начальных условий.  Задачи сохраняются на сервере в рабочем пространстве пользователя.  Результаты вычислений представляются в виде графиков, выгружаемых из приложения в векторном формате SVG.

Одной из оригинальных функций приложения является выгрузка исходного состояния модели, задаваемого вычислительным модулем, исходных табличных данных пользователя, начальных условиямй, шаблона программы вычисления различных значений с набором стандартных операций вместе с пояснениями на английском языке в виде интерактивной записной книжки Pluto (Pluto notebook).  Записная книжка исполняется во встроенном фрейме браузера (iframe), где специалисту-предметнику предоставлены примеры использования результатов моделирования при решении стандартных задач: отображение значений грубины и температуры по табличным и индивидуальным значениям, построение интерактивных графиков Plotly.js, экспорта графического материала в растровые изображения, возможностью загрузки новых и выгрузки рассчитанных табличных данных на разных этапах вычислительного процесса.  Настроенная записная книжка при необходимости загружается на компьютер в виде программы Julia, которую можно запускать как в интерактивном графическом режиме по инструкции пакета Pluto, так и в пакетном.  Таким образом, записная книжка, построенная прикладным пакетом GTherm, может быть использована независимо от программы GTHerm в других научных исследованиях.

Реализованна функция порождения шаблонов использования моделей позволяет существенно упростить использование гибкой технологии записных книжек специалистами-предметниками.  При использовании технологии специалист сразу получает вариант функционирующей записной книжки для задачи, поставленной им самостоятельно; комментарии в тексте объясняют суть представленного программного кода; предметник может попробовать поменять программный код самостоятельно, и в случае утери контроля над кодом страницу можно перегенерировать заново; загруженную книжку можно переслать коллеге-математику на доработку согласно новым требованиям независимо от основного приложения; книжка является строго формальным документом взаимодействия предметника и математика-программиста при разработке специальных вариантов модели; формируется стандартный набор книжек, на основе которых можно формировать новое техническое задание для развития основного приложения и т.д.

Разработанная платформа после определенных доработок, не влияющих на основную ее концепцию, будет далее развиваться по нескольким направлениям: 1) реализация новых приложений подобного класса для специалистов-предметников, ведущих исследования в науках о земле и науках о живом, 2) совершенствования процедуры генерации шаблона, в зависимости от заданных пользователем параметров, специализирующих целевой набор операций; 3) включение в среды распределенных вычислений в качестве узла взаимодействия с пользователем и управления вычислительным процессом - решение вычислительно сложных задач; 4) создание сред генерации шаблонов многомерного статистического и нейросетевого анализа табличных данных (datasets) в вышеупомянутых областях науки - аналогов программ бизнес аналитики (Metabase, SuperSet и др.).
